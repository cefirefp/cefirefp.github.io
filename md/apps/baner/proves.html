<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Creador de Baners</title>
    <script src="jquery-3.6.0.min.js"></script>
    <link href="bootstrap.min.css" rel="stylesheet">
    <script src="bootstrap.min.js"></script>
    <!-- <style>
        @font-face {
            font-family: 'MyCustomFont';
            src: url('RTL-MediaPro-Light.ttf') format('truetype'),
                url('RTL-MediaPro-Light.woff') format('woff');
            src: url('RTL-MediaPro-Regular.ttf') format('truetype'),
                url('RTL-MediaPro-Regular.woff') format('woff');
            src: url('RTL-MediaPro-Medium.ttf') format('truetype'),
                url('RTL-MediaPro-Medium.woff') format('woff');
            /* Add other formats like woff2, eot, svg if needed */
            font-weight: normal;
            font-style: normal;
        }
    </style> -->

    <style>
        .svg-container {
            width: 100%;
            height: 100vh;
            /* You can adjust the height as needed */
            display: flex;
            justify-content: center;
            align-items: center;
        }

        .svg-object {
            width: 100%;
            display: flex;
            align-items: flex-start;
            /* Elimina stretch vertical */
            height: auto;
            /* No fuerza altura fija */
            padding: 0;
            /* Quita padding extra */
            margin: 0;
            line-height: 0;
        }

        .svg-object svg {
            width: 100%;
            height: auto;
            /* Mantiene proporción */
            display: block;
            /* Bloquea baseline inline */
            vertical-align: top;
            /* Alternativa si no block */
            object-fit: contain;
        }

        .svg-object2 {
            width: 100%;
            display: flex;
            align-items: flex-start;
            /* Elimina stretch vertical */
            height: auto;
            /* No fuerza altura fija */
            padding: 0;
            /* Quita padding extra */
            margin: 0;
            line-height: 0;
        }

        .svg-object2 svg {
            width: 100%;
            height: auto;
            /* Mantiene proporción */
            display: block;
            /* Bloquea baseline inline */
            vertical-align: top;
            /* Alternativa si no block */
            object-fit: contain;
        }

        .dropZone {
            width: 300px;
            height: 200px;
            border: 2px dashed #ccc;
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            text-align: center;
            color: #aaa;
            margin: 20px auto;
        }

        #dropZone1.hover {
            border-color: #aaa;
            color: #333;
        }

        #dropZone2.hover {
            border-color: #aaa;
            color: #333;
        }

        #dropZone3.hover {
            border-color: #aaa;
            color: #333;
        }
    </style>
</head>

<body>
    <div class="container pb-5 mb-5">
        <h1 class="text-center my-4">Creador de Baners</h1>
        <div id="svg-preview" class="svg-object"></div><br>
        <div id="svg-preview-va" class="svg-object"></div><br>
        <div style="display: flex; justify-content: space-around; align-items: center; gap: 10px;">
            <div id="svg-preview-inst" class="svg-object2"></div>
            <div id="svg-preview-inst-va" class="svg-object2"></div>
        </div>

        <div class="container mt-5">
            <!-- Inputs -->
            <label for="checkboxes">Tipo de curso</label><br>
            <div class="d-flex justify-content-center">
                <div class="form-group form-check-inline" id="checkboxes">
                    <div class="form-check">
                        <input onclick="curso('Curso')" type="checkbox" class="form-check-input" id="checkbox11">
                        <label class="form-check-label" for="checkbox1">Curso</label>
                    </div>
                    <div class="form-check">
                        <input onclick="curso('Jornada')" type="checkbox" class="form-check-input" id="checkbox22">
                        <label class="form-check-label" for="checkbox2">Jornada</label>
                    </div>
                    <div class="form-check">
                        <input onclick="curso('Taller')" type="checkbox" class="form-check-input" id="checkbox33">
                        <label class="form-check-label" for="checkbox3">Taller</label>
                    </div>
                    <div class="form-check">
                        <input onclick="curso('AAPP')" type="checkbox" class="form-check-input" id="checkbox44">
                        <label class="form-check-label" for="checkbox4">AAPP</label>
                    </div>
                </div>
            </div>

        </div>




        <div class="container mt-5">
            <!-- Inputs -->
            <div class="form-group d-inline-block mr-3">
                <label for="colorPicker1">Selecciona color principal</label>
                <input type="color" class="form-control" id="colorPicker1" value="#0a3c63" oninput="Color(this.value)">
            </div>
            <div class="form-group d-inline-block">
                <label for="colorPicker2">Selecciona color fondo</label>
                <input type="color" class="form-control" id="colorPicker2" value="#0a3c63" oninput="Color2(this.value)">
            </div>
            <div style="display: flex; justify-content: space-around;">
                <div id="dropZone1" class="dropZone">Arrossega i deixa anar la imatge de la cantonada superior
                    esquerra.<br>Res. recomanada: 460x180</div>
                <div id="dropZone2" class="dropZone">Arrossega i deixa anar la imatge de la cantonada inferior
                    dreta.<br>Res. recomanada: 400x180</div>
                <div id="dropZone3" class="dropZone">Arrossega i deixa anar la imatge de Instagram.<br>Res. recomanada:
                    115x115</div>
            </div>

            <div class="form-group">
                <label for="input1">Título</label>
                <input oninput="this.value = this.value.toUpperCase(); titular(this.value)" type="text"
                    class="form-control" id="titulo" placeholder="Ingresa título...">
            </div>

            <div class="form-group">
                <label for="input1">Títol en valencià</label>
                <input oninput="this.value = this.value.toUpperCase(); titular_va(this.value)" type="text"
                    class="form-control" id="titulo_va" placeholder="Ingressa títol...">
            </div>

            <div class="form-group">
                <label for="sliderInput">Tamany de lletra (0-10)</label>
                <input type="range" class="form-control-range" id="sliderInput" min="0" max="10" value="10">
                <span id="sliderValue">10</span>
            </div>

            <script>
                document.getElementById('sliderInput').addEventListener('input', function () {
                    document.getElementById('sliderValue').textContent = this.value;
                    const idsCast = ['titol', 'titol2linies1l', 'titol2linies2l'];
                    const idsCastDirect = ['textinstcast', 'textinstcast2', 'textinstval', 'textinstval2'];

                    // Elementos valenciano
                    const idsVal = ['titolv', 'titol2linies1lv', 'titol2linies2lv'];

                    // Función helper para aplicar font-weight
                    function aplicarPeso(elemento, peso) {
                        if (elemento) {
                            elemento.style.fontWeight = peso;
                            // Si tiene tspan anidados, también aplicar
                            const tspans = elemento.querySelectorAll('tspan');
                            tspans.forEach(tspan => tspan.style.fontSize = peso + 'px');
                        }
                    }

                    // Aplicar a castellano (tspan)
                    idsCast.forEach(id => {
                        const elem = document.getElementById(id);
                        if (elem) aplicarPeso(elem, 70 + (this.value * 5));
                        titular(document.getElementById('titulo').value);
                    });

                    // Aplicar a castellano directo
                    idsCastDirect.forEach(id => {
                        const elem = document.getElementById(id);
                        if (elem) elem.style.fontSize = 18 + this.value * 1.8;
                    });

                    // Aplicar a valenciano (tspan)
                    idsVal.forEach(id => {
                        const elem = document.getElementById(id);
                        if (elem) aplicarPeso(elem, 70 + (this.value * 5));
                        titular_va(document.getElementById('titulo_va').value);
                    });



                });


            </script>

            <div class="form-group">
                <label for="input2">Fechas</label>
                <input
                    oninput="this.value = this.value.charAt(0).toUpperCase() + this.value.slice(1); fechas(this.value)"
                    type="text" class="form-control" id="fechas_text" placeholder="Ingresa las fechas...">
                <label for="input2">Dates (en valencià)</label>
                <input
                    oninput="this.value = this.value.charAt(0).toUpperCase() + this.value.slice(1); fechas_va(this.value)"
                    type="text" class="form-control" id="fechas_text_va" placeholder="Ingressa les dates...">
                <div class="form-check">
                    <input onclick="semipresencial()" type="checkbox" class="form-check-input" id="checkbox3s">
                    <label class="form-check-label" for="checkbox3s">Presencial</label>
                </div>
                <div class="form-check">
                    <input onclick="sessions_sincrones()" type="checkbox" class="form-check-input"
                        id="checkbox3sincrones">
                    <label class="form-check-label" for="checkbox3s">Semipresencial</label>
                </div>
                <label for="input2">Presencial (Deixa en blanc si no és presencial)</label>
                <input oninput="presencial(this.value)" type="text" class="form-control" id="presencial"
                    placeholder="Ingressa lloc de realizació...">
            </div>
            <div class="form-group">
                <label for="input3">Horas / Hores</label>
                <input oninput="horas(this.value)" type="text" class="form-control" id="horas"
                    placeholder="Ingresa horas...">
            </div>


            <!-- Checkboxes -->
            <label for="checkboxes">Logotipos</label><br>
            <div class="d-flex justify-content-center">
                <div class="form-group form-check-inline" id="checkboxes">
                    <div class="form-check">
                        <input onclick="cambiaLogo()" type="checkbox" class="form-check-input" id="checkbox1">
                        <label class="form-check-label" for="checkbox1">Min+FSE+Cefire+FP (FSE)</label>
                    </div>
                    <div class="form-check">
                        <input onclick="cambiaLogo2()" type="checkbox" class="form-check-input" id="checkbox2">
                        <label class="form-check-label" for="checkbox2">Min+Gen+Cefire+FP (PAA o AAPP)</label>
                    </div>
                    <div class="form-check">
                        <input onclick="cambiaLogo3()" type="checkbox" class="form-check-input" id="checkbox3">
                        <label class="form-check-label" for="checkbox3">Gen+Cefire+FP (PAA cost 0)</label>
                    </div>
                    <!-- 
                            <div class="form-check">
                                <input type="checkbox" class="form-check-input" id="checkbox4">
                                <label class="form-check-label" for="checkbox4">Checkbox 4</label>
                            </div> -->
                </div>
            </div>
        </div>

        <div class="d-flex justify-content-center my-3">
            <button class="btn btn-success mx-2" onclick="descarrega_tot()">Descargar PNG</button>
            <button class="btn btn-primary mx-2" onclick="descargasvg()">Descarga SVG</button>
            <button class="btn btn-danger mx-2" onclick="descarrega_tot_inst()">Descargar PNG Instagram</button>
            <button class="btn btn-secondary mx-2" onclick="descargasvg_inst()">Descarga SVG Instagram</button>
            <button class="btn btn-info mx-2" onclick="descarregaFonts()">Descargar Fonts per a SVG</button>

        </div>


        <canvas id="canvas" style="display:none;"></canvas>
        <canvas id="canvas_va" style="display:none;"></canvas>
        <div id="pngContainer"></div>
    </div>
    <script>
        var svgElement = null;
        var svgElement_va = null;
        var svgElement_instagram = null;
        var svgElement_instagram_va = null;


        //Dropzone1

        const dropZone1 = document.getElementById('dropZone1');
        //const base64Output = document.getElementById('base64Output');

        dropZone1.addEventListener('dragover', (e) => {
            e.preventDefault();
            dropZone1.classList.add('hover');
        });

        dropZone1.addEventListener('dragleave', () => {
            dropZone1.classList.remove('hover');
        });

        dropZone1.addEventListener('drop', (e) => {
            e.preventDefault();
            dropZone1.classList.remove('hover');

            const file1 = e.dataTransfer.files[0];
            if (file1) {
                const reader1 = new FileReader();

                reader1.onloadend = () => {
                    const base64String = reader1.result.replace('data:', '').replace(/^.+,/, '');
                    //base64Output.textContent = base64String;
                    const newImageBase64 = "data:image/png;base64," + base64String;
                    const image = svgElement.querySelector('#imgesquerre');
                    const image_va = svgElement_va.querySelector('#imgesquerrev');
                    //Instagram
                    const image_instagram = svgElement_instagram.querySelector('#image65inst');
                    const image_instagram_va = svgElement_instagram_va.querySelector('#image65inst_va');

                    image.setAttributeNS('http://www.w3.org/1999/xlink', 'href', newImageBase64);
                    image_va.setAttributeNS('http://www.w3.org/1999/xlink', 'href', newImageBase64);
                    image_instagram.setAttributeNS('http://www.w3.org/1999/xlink', 'href', newImageBase64);
                    image_instagram_va.setAttributeNS('http://www.w3.org/1999/xlink', 'href', newImageBase64);

                }

                reader1.readAsDataURL(file1);
            }
        });

        //Dropzone2

        const dropZone2 = document.getElementById('dropZone2');
        //const base64Output = document.getElementById('base64Output');

        dropZone2.addEventListener('dragover', (e) => {
            e.preventDefault();
            dropZone2.classList.add('hover');
        });

        dropZone2.addEventListener('dragleave', () => {
            dropZone2.classList.remove('hover');
        });

        dropZone2.addEventListener('drop', (e) => {
            e.preventDefault();
            dropZone2.classList.remove('hover');

            const file2 = e.dataTransfer.files[0];
            if (file2) {
                const reader2 = new FileReader();

                reader2.onloadend = () => {
                    const base64String = reader2.result.replace('data:', '').replace(/^.+,/, '');
                    //base64Output.textContent = base64String;
                    const newImageBase64 = "data:image/png;base64," + base64String;
                    const image2 = svgElement.querySelector('#imgdreta');
                    const image2_va = svgElement_va.querySelector('#imgdretav');
                    image2.setAttributeNS('http://www.w3.org/1999/xlink', 'href', newImageBase64);
                    image2_va.setAttributeNS('http://www.w3.org/1999/xlink', 'href', newImageBase64);
                }

                reader2.readAsDataURL(file2);
            }
        });

        //Dropzone3

        const dropZone3 = document.getElementById('dropZone3');
        //const base64Output = document.getElementById('base64Output');

        dropZone3.addEventListener('dragover', (e) => {
            e.preventDefault();
            dropZone3.classList.add('hover');
        });

        dropZone3.addEventListener('dragleave', () => {
            dropZone3.classList.remove('hover');
        });

        dropZone3.addEventListener('drop', (e) => {
            e.preventDefault();
            dropZone3.classList.remove('hover');

            const file2 = e.dataTransfer.files[0];
            if (file2) {
                const reader2 = new FileReader();

                reader2.onloadend = () => {
                    const base64String = reader2.result.replace('data:', '').replace(/^.+,/, '');
                    //base64Output.textContent = base64String;
                    const newImageBase64 = "data:image/png;base64," + base64String;
                    const image2 = svgElement_instagram.querySelector('#imginst');
                    const image2_va = svgElement_instagram_va.querySelector('#imginstv');
                    image2.setAttributeNS('http://www.w3.org/1999/xlink', 'href', newImageBase64);
                    image2_va.setAttributeNS('http://www.w3.org/1999/xlink', 'href', newImageBase64);
                }

                reader2.readAsDataURL(file2);
            }
        });








        // Funcions

        function descarregaFonts() {
            // Descargar las fuentes utilizadas en el SVG
            const fontsUrl = 'fonts.zip';
            const a = document.createElement('a');
            a.href = fontsUrl;
            a.download = 'fonts.zip';
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
        }

        function descargasvg() {
            // Descargar SVG en castellano
            const svgElement2 = document.getElementById('svg-preview').firstElementChild.cloneNode(true);
            // Remove all elements with style visibility:hidden
            Array.from(svgElement2.querySelectorAll('[style*="visibility:hidden"]')).forEach(el => el.parentNode.removeChild(el));
            svgElement2.setAttribute('width', 2040);
            svgElement2.setAttribute('height', 800);
            const svgData = new XMLSerializer().serializeToString(svgElement2);
            const blob = new Blob([svgData], { type: 'image/svg+xml;charset=utf-8' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = 'baner_castella.svg';
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            URL.revokeObjectURL(url);

            // Descargar SVG en valenciano
            const svgElement2_va = document.getElementById('svg-preview-va').firstElementChild.cloneNode(true);
            // Remove all elements with style visibility:hidden
            Array.from(svgElement2_va.querySelectorAll('[style*="visibility:hidden"]')).forEach(el => el.parentNode.removeChild(el));
            svgElement2_va.setAttribute('width', 2040);
            svgElement2_va.setAttribute('height', 800);
            const svgData_va = new XMLSerializer().serializeToString(svgElement2_va);
            const blob_va = new Blob([svgData_va], { type: 'image/svg+xml;charset=utf-8' });
            const url_va = URL.createObjectURL(blob_va);
            const a_va = document.createElement('a');
            a_va.href = url_va;
            a_va.download = 'baner_valencia.svg';
            document.body.appendChild(a_va);
            a_va.click();
            document.body.removeChild(a_va);
            URL.revokeObjectURL(url_va);
        }

        //Instagram

        function descargasvg_inst() {
            // Descargar SVG en castellano
            const svgElement2 = document.getElementById('svg-preview-inst').firstElementChild.cloneNode(true);
            // Remove all elements with style visibility:hidden
            Array.from(svgElement2.querySelectorAll('[style*="visibility:hidden"]')).forEach(el => el.parentNode.removeChild(el));
            svgElement2.setAttribute('width', 2040);
            svgElement2.setAttribute('height', 800);
            const svgData = new XMLSerializer().serializeToString(svgElement2);
            const blob = new Blob([svgData], { type: 'image/svg+xml;charset=utf-8' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = 'baner_castella_instagram.svg';
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            URL.revokeObjectURL(url);

            // Descargar SVG en valenciano
            const svgElement2_va = document.getElementById('svg-preview-inst-va').firstElementChild.cloneNode(true);
            // Remove all elements with style visibility:hidden
            Array.from(svgElement2_va.querySelectorAll('[style*="visibility:hidden"]')).forEach(el => el.parentNode.removeChild(el));
            svgElement2_va.setAttribute('width', 2040);
            svgElement2_va.setAttribute('height', 800);
            const svgData_va = new XMLSerializer().serializeToString(svgElement2_va);
            const blob_va = new Blob([svgData_va], { type: 'image/svg+xml;charset=utf-8' });
            const url_va = URL.createObjectURL(blob_va);
            const a_va = document.createElement('a');
            a_va.href = url_va;
            a_va.download = 'baner_valencia_instagram.svg';
            document.body.appendChild(a_va);
            a_va.click();
            document.body.removeChild(a_va);
            URL.revokeObjectURL(url_va);
        }





        function dividirCadena(texto, largolin) {
            if (texto.length <= largolin) {
                return [texto];
            }

            let indice = largolin;

            while (indice > 0 && texto[indice] !== ' ') {
                indice--;
            }

            if (indice === 0) {
                indice = largolin; // Si no hay espacio, dividimos en el índice largolin
            }

            const primeraParte = texto.substring(0, indice);
            const segundaParte = texto.substring(indice).trim();

            return [primeraParte, segundaParte];
        }

        //titulo1lin
        //titulo2lin1
        //titulo2lin2


        function titular(t) {
            largomax = document.getElementById('sliderInput').value;
            largolin = 0;
            switch (largomax) {
                case '0':
                    largolin = 36;
                    //27
                    break;
                case '1':
                    largolin = 34;

                    //25

                    break;
                case '2':
                    largolin = 32;
                    //23

                    break;
                case '3':
                    largolin = 31;
                    //21
                    break;
                case '4':
                    largolin = 29;
                    break;
                case '5':
                    largolin = 27;
                    break;
                case '6':
                    largolin = 26;
                    break;
                case '7':
                    largolin = 25;
                    break;
                case '8':
                    largolin = 25;
                    break;
                case '9':
                    largolin = 24;
                    break;
                case '10':
                    largolin = 22;
            }



            if (t.length > largolin * 2) {
                alert("El titular es demasiado largo");
                return;
            }

            const textElementaux = document.getElementById('titol');
            const tspan = textElementaux.querySelector('tspan');
            //tspan.textContent = t;

            const textElement2aux = document.getElementById('titol2linies1l');
            const tspan2 = textElement2aux.querySelector('tspan');
            //tspan2.textContent = t

            const textElement3aux = document.getElementById('titol2linies2l');
            const tspan3 = textElement3aux.querySelector('tspan');
            //tspan3.textContent = t

            const textElement4aux = document.getElementById('textinstcast');
            const textElement4aux_2 = document.getElementById('textinstcast2');

            const ano1 = document.getElementById('anys');
            const ano1Text = ano1.querySelector('tspan');
            const ano2 = document.getElementById('anys2linies');
            const ano2Text = ano2.querySelector('tspan');

            console.log(t.length);
            if (t.length < largolin) {
                console.log("Menor de " + largolin + " caracteres");
                tspan.style.visibility = 'visible';
                tspan.style.display = 'inline';
                tspan2.style.visibility = 'hidden';
                tspan2.style.display = 'none';
                tspan3.style.visibility = 'hidden';
                tspan3.style.display = 'none';

                ano1Text.style.visibility = 'visible';
                ano1Text.style.display = 'inline';

                ano2Text.style.visibility = 'hidden';
                ano2Text.style.display = 'none';

                textElement4aux.style.visibility = 'visible';
                textElement4aux.style.display = 'inline';
                textElement4aux_2.style.visibility = 'hidden';
                textElement4aux_2.style.display = 'none';

                if (tspan) {
                    tspan.textContent = t;
                    textElement4aux.textContent = t;
                }
            } else if (t.length >= largolin) {
                console.log("Entre " + largolin + " caracteres");
                tspan.style.visibility = 'hidden';
                tspan.style.display = 'none';
                tspan2.style.visibility = 'visible';
                tspan2.style.display = 'inline';
                tspan3.style.visibility = 'visible';
                tspan3.style.display = 'inline';
                ano1Text.style.visibility = 'hidden';
                ano1Text.style.display = 'none';

                ano2Text.style.visibility = 'visible';
                ano2Text.style.display = 'inline';

                textElement4aux.style.visibility = 'visible';
                textElement4aux.style.display = 'inline';
                textElement4aux_2.style.visibility = 'visible';
                textElement4aux_2.style.display = 'inline';

                const [primeraParte, segundaParte] = dividirCadena(t, largolin);

                if (tspan2) {
                    tspan2.textContent = primeraParte;
                    textElement4aux.textContent = primeraParte;
                }
                tspan3.textContent = segundaParte;
                textElement4aux_2.textContent = segundaParte;
            }


        }


        function titular_va(t) {

            largomax = document.getElementById('sliderInput').value;
            largolin = 0;
            switch (largomax) {
                case '0':
                    largolin = 36;
                    //27
                    break;
                case '1':
                    largolin = 34;

                    //25

                    break;
                case '2':
                    largolin = 32;
                    //23

                    break;
                case '3':
                    largolin = 31;
                    //21
                    break;
                case '4':
                    largolin = 29;
                    break;
                case '5':
                    largolin = 27;
                    break;
                case '6':
                    largolin = 26;
                    break;
                case '7':
                    largolin = 25;
                    break;
                case '8':
                    largolin = 25;
                    break;
                case '9':
                    largolin = 24;
                    break;
                case '10':
                    largolin = 22;
            }



            if (t.length > largolin * 2) {
                alert("El titular es demasiado largo");
                return;
            }

            const textElementaux = document.getElementById('titolv');
            const tspan = textElementaux.querySelector('tspan');
            //tspan.textContent = t;

            const textElement2aux = document.getElementById('titol2linies1lv');
            const tspan2 = textElement2aux.querySelector('tspan');
            //tspan2.textContent = t

            const textElement3aux = document.getElementById('titol2linies2lv');
            const tspan3 = textElement3aux.querySelector('tspan');
            //tspan3.textContent = t

            const textElement4aux = document.getElementById('textinstval');
            const textElement4aux_2 = document.getElementById('textinstval2');

            const ano1 = document.getElementById('anysv');
            const ano1Text = ano1.querySelector('tspan');
            const ano2 = document.getElementById('anys2liniesv');
            const ano2Text = ano2.querySelector('tspan');

            let currentStyle = tspan.getAttribute('style') || '';
            let currentStyle2 = tspan2.getAttribute('style') || '';
            let currentStyle3 = tspan3.getAttribute('style') || '';
            let currentStyle4 = ano1Text.getAttribute('style') || '';
            let currentStyle5 = ano2Text.getAttribute('style') || '';

            let currentStyle6 = textElement4aux.getAttribute('style') || '';
            let currentStyle7 = textElement4aux_2.getAttribute('style') || '';

            console.log(t.length);
            if (t.length < largolin) {
                console.log("Menor de " + largolin + " caracteres");
                tspan.style.visibility = 'visible';
                tspan.style.display = 'inline';
                tspan2.style.visibility = 'hidden';
                tspan2.style.display = 'none';
                tspan3.style.visibility = 'hidden';
                tspan3.style.display = 'none';

                ano1Text.style.visibility = 'visible';
                ano1Text.style.display = 'inline';

                ano2Text.style.visibility = 'hidden';
                ano2Text.style.display = 'none';


                textElement4aux.style.visibility = 'visible';
                textElement4aux.style.display = 'inline';

                textElement4aux_2.style.visibility = 'hidden';
                textElement4aux_2.style.display = 'none';


                if (tspan) {
                    tspan.textContent = t;
                    textElement4aux.textContent = t;
                }
            } else if (t.length >= largolin && t.length <= largolin * 2) {
                console.log("Entre " + largolin + " y " + (largolin * 2) + " caracteres");
                tspan.style.visibility = 'hidden';
                tspan.style.display = 'none';
                tspan2.style.visibility = 'visible';
                tspan2.style.display = 'inline';
                tspan3.style.visibility = 'visible';
                tspan3.style.display = 'inline';
                ano1Text.style.visibility = 'hidden';
                ano1Text.style.display = 'none';

                ano2Text.style.visibility = 'visible';
                ano2Text.style.display = 'inline';

                textElement4aux.style.visibility = 'visible';
                textElement4aux.style.display = 'inline';

                textElement4aux_2.style.visibility = 'visible';
                textElement4aux_2.style.display = 'inline';

                const [primeraParte, segundaParte] = dividirCadena(t, largolin);

                if (tspan2) {
                    tspan2.textContent = primeraParte;
                    textElement4aux.textContent = primeraParte;
                }
                tspan3.textContent = segundaParte;
                textElement4aux_2.textContent = segundaParte;
            }

            /*
                        // instagram
                        const textElementinst = document.getElementById('text1inst');
                        const textElementinst2 = document.getElementById('text2inst');
            
                        textElementinst.setAttribute('style', 'visibility:visible');
                        textElementinst2.setAttribute('style', 'visibility:visible');
                        if (t.length <= 40) {
                            textElementinst.setAttribute('style', 'visibility:visible');
                            textElementinst2.setAttribute('style', 'visibility:hidden');
                            if (textElementinst) {
                                textElementinst.textContent = t;
                            }
                        } else {
                            textElementinst.setAttribute('style', 'visibility:visible');
                            textElementinst2.setAttribute('style', 'visibility:visible');
                            const [primeraParte, segundaParte] = dividirCadena(t, 40);
            
                            if (textElementinst) {
                                textElementinst.textContent = segundaParte;
                            }
                            textElementinst2.textContent = primeraParte;
                        }*/
        }


        function curso(c) {
            const horasElement = document.getElementById('Curs');
            tspan1 = horasElement.querySelector('tspan');
            const custinstcast = document.getElementById('cursinstcast');
            const cursinstval = document.getElementById('cursinstval');

            const horasElement2 = document.getElementById('Cursv');
            tspan2 = horasElement2.querySelector('tspan');
            //Instagram
            const texto_curso_instagram = document.getElementById('cursotinst');
            const texto_curso_instagram_va = document.getElementById('cursotinst_va');


            if (horasElement) {
                tspan1.textContent = c;
                custinstcast.textContent = c;
            }

            if (horasElement2) {
                if (c == "Curso") {
                    tspan2.textContent = "Curs";
                    cursinstval.textContent = "Curs";
                    document.getElementById('checkbox22').checked = false;
                    document.getElementById('checkbox33').checked = false;
                    document.getElementById('checkbox44').checked = false;
                } else if (c == "Jornada") {
                    tspan2.textContent = "Jornada";
                    cursinstval.textContent = "Jornada";
                    document.getElementById('checkbox11').checked = false;
                    document.getElementById('checkbox33').checked = false;
                    document.getElementById('checkbox44').checked = false;
                } else if (c == "Taller") {
                    tspan2.textContent = "Taller";
                    cursinstval.textContent = "Taller";
                    document.getElementById('checkbox22').checked = false;
                    document.getElementById('checkbox11').checked = false;
                    document.getElementById('checkbox44').checked = false;
                } else if (c == "AAPP") {
                    tspan1.textContent = "Convocatoria de Administraciones Públicas";
                    tspan2.textContent = "Convocatòria d'Administracions Públiques";
                    cursinstcast.textContent = "AAPP";
                    cursinstval.textContent = "AAPP";
                    document.getElementById('checkbox22').checked = false;
                    document.getElementById('checkbox11').checked = false;
                    document.getElementById('checkbox33').checked = false;
                }
            }

        }

        function horas(h) {
            const horasElement = document.getElementById('hores');
            tspan1 = horasElement.querySelector('tspan');
            const horasElement_va = document.getElementById('hores2');
            tspan2 = horasElement_va.querySelector('tspan');

            const horasElement2 = document.getElementById('horesv');
            tspan3 = horasElement2.querySelector('tspan');
            const horasElement12 = document.getElementById('hores2v');
            tspan4 = horasElement12.querySelector('tspan');


            const horasElement1_va = document.getElementById('horas1_va');
            //Instagram
            const texto_horas_instagram = document.getElementById('horasinst');
            const texto_horas_instagram1 = document.getElementById('horas1inst');
            const texto_horas_instagram_va = document.getElementById('horasinst_va');
            const texto_horas_instagram1_va = document.getElementById('horas1inst_va');

            if (horasElement) {
                tspan1.textContent = h + ' horas';
                tspan2.textContent = h + ' horas';
                tspan3.textContent = h + ' hores';
                tspan4.textContent = h + ' hores';

                //Instagram
                texto_horas_instagram.textContent = h + ' horas';
                texto_horas_instagram1.textContent = h + ' horas';
                texto_horas_instagram_va.textContent = h + ' hores';
                texto_horas_instagram1_va.textContent = h + ' hores';

            }
        }

        function fechas(f) {
            const fElement = document.getElementById('data');
            tspan = fElement.querySelector('tspan');

            const fElement2 = document.getElementById('data2');
            tspan2 = fElement2.querySelector('tspan');
            //Instagram
            const fElement3 = document.getElementById('datesinstcast');

            if (fElement) {
                tspan.textContent = f;
                //Instagram
                tspan2.textContent = f;
                fElement3.textContent = f;
            }
        }

        function fechas_va(f) {
            const fElement_va = document.getElementById('datav');
            tspan = fElement_va.querySelector('tspan');

            const fElement_va2 = document.getElementById('data2v');
            tspan2 = fElement_va2.querySelector('tspan');

            const fElement_va3 = document.getElementById('datesinstval');


            if (fElement_va) {
                tspan.textContent = f;
                tspan2.textContent = f;
                fElement_va3.textContent = f;
            }
        }




        function Color(col) {
            const c1 = svgElement.getElementById('marco1b');
            const c2 = svgElement.getElementById('fondo1b');
            const c3 = svgElement_instagram.getElementById('fondobaix');

            c1.setAttribute('stroke', col);
            c2.setAttribute('fill', col);
            c3.setAttribute('fill', col);


            const c1_va = svgElement_va.getElementById('marco1bv');
            const c2_va = svgElement_va.getElementById('fondo1bv');
            const c3_va = svgElement_instagram_va.getElementById('fondobaixv');

            c1_va.setAttribute('stroke', col);
            c2_va.setAttribute('fill', col);
            c3_va.setAttribute('fill', col);

        }

        function Color2(col) {
            const r1 = svgElement.getElementById('fondoprincipal');
            r1.setAttribute('style', "fill:" + col);

            const r1_va = svgElement_va.getElementById('fondoprincipalv');
            r1_va.setAttribute('style', "fill:" + col);

            const r2 = svgElement_instagram.getElementById('fondodalt');
            r2.setAttribute('style', "fill:" + col);

            const r2_va = svgElement_instagram_va.getElementById('fondodaltv');
            r2_va.setAttribute('style', "fill:" + col);


        }

        function semipresencial() {


            const semi1 = svgElement.getElementById('icones');
            const semi2 = svgElement.getElementById('iconespresencial');

            const semi3 = svgElement.getElementById('hores');
            const semi4 = svgElement.getElementById('modalitat');
            const semi5 = svgElement.getElementById('data');

            const semi6 = svgElement.getElementById('hores2');
            const semi7 = svgElement.getElementById('modalitat2');
            const semi8 = svgElement.getElementById('data2');
            const semi9 = svgElement.getElementById('ubicacio2');

            tspan1 = semi4.querySelector('tspan');
            tspan2 = semi7.querySelector('tspan');


            if (document.getElementById('checkbox3s').checked) {
                semi1.style.visibility = 'hidden';
                semi2.style.visibility = 'visible';
                semi1.style.display = 'none';
                semi2.style.display = 'inline';


                semi3.style.visibility = 'hidden';
                semi3.style.display = 'none';
                semi4.style.visibility = 'hidden';
                semi4.style.display = 'none';
                semi5.style.visibility = 'hidden';
                semi5.style.display = 'none';
                semi6.style.visibility = 'visible';
                semi6.style.display = 'inline';
                semi7.style.visibility = 'visible';
                semi7.style.display = 'inline';
                semi8.style.visibility = 'visible';
                semi8.style.display = 'inline';
                semi9.style.visibility = 'visible';
                semi9.style.display = 'inline';
                tspan1.textContent = 'Presencial';
                tspan2.textContent = 'Presencial';
            } else {
                semi1.style.visibility = 'visible';
                semi2.style.visibility = 'hidden';
                semi1.style.display = 'inline';
                semi2.style.display = 'none';

                semi3.style.visibility = 'visible';
                semi3.style.display = 'inline';
                semi4.style.visibility = 'visible';
                semi4.style.display = 'inline';
                semi5.style.visibility = 'visible';
                semi5.style.display = 'inline';
                semi6.style.visibility = 'hidden';
                semi6.style.display = 'none';
                semi7.style.visibility = 'hidden';
                semi7.style.display = 'none';
                semi8.style.visibility = 'hidden';
                semi8.style.display = 'none';
                semi9.style.visibility = 'hidden';
                semi9.style.display = 'none';
                tspan1.textContent = 'A distancia';
                tspan2.textContent = 'A distancia';
            }

            // EN VALENCIÀ

            const semi1v = svgElement_va.getElementById('iconesv');
            const semi2v = svgElement_va.getElementById('iconespresencialv');

            const semi3v = svgElement_va.getElementById('horesv');
            const semi4v = svgElement_va.getElementById('modalitatv');
            const semi5v = svgElement_va.getElementById('datav');

            const semi6v = svgElement_va.getElementById('hores2v');
            const semi7v = svgElement_va.getElementById('modalitat2v');
            const semi8v = svgElement_va.getElementById('data2v');
            const semi9v = svgElement_va.getElementById('ubicacio2v');

            tspan1v = semi4v.querySelector('tspan');
            tspan2v = semi7v.querySelector('tspan');

            if (document.getElementById('checkbox3s').checked) {
                semi1v.style.visibility = 'hidden';
                semi2v.style.visibility = 'visible';
                semi1v.style.display = 'none';
                semi2v.style.display = 'inline';

                semi3v.style.visibility = 'hidden';
                semi3v.style.display = 'none';
                semi4v.style.visibility = 'hidden';
                semi4v.style.display = 'none';
                semi5v.style.visibility = 'hidden';
                semi5v.style.display = 'none';
                semi6v.style.visibility = 'visible';
                semi6v.style.display = 'inline';
                semi7v.style.visibility = 'visible';
                semi7v.style.display = 'inline';
                semi8v.style.visibility = 'visible';
                semi8v.style.display = 'inline';
                semi9v.style.visibility = 'visible';
                semi9v.style.display = 'inline';
                tspan1v.textContent = 'Presencial';
                tspan2v.textContent = 'Presencial';
            } else {
                semi1v.style.visibility = 'visible';
                semi2v.style.visibility = 'hidden';
                semi1v.style.display = 'inline';
                semi2v.style.display = 'none';

                semi3v.style.visibility = 'visible';
                semi3v.style.display = 'inline';
                semi4v.style.visibility = 'visible';
                semi4v.style.display = 'inline';
                semi5v.style.visibility = 'visible';
                semi5v.style.display = 'inline';
                semi6v.style.visibility = 'hidden';
                semi6v.style.display = 'none';
                semi7v.style.visibility = 'hidden';
                semi7v.style.display = 'none';
                semi8v.style.visibility = 'hidden';
                semi8v.style.display = 'none';
                semi9v.style.visibility = 'hidden';
                semi9v.style.display = 'none';
                tspan1v.textContent = 'A distància';
                tspan2v.textContent = 'A distància';
            }

        }

        function sessions_sincrones() {

            const textonline = document.getElementById('modalitat');
            const textonline2 = document.getElementById('modalitat2');
            const textonline_va = document.getElementById('modalitatv');
            const textonline2_va = document.getElementById('modalitat2v');
            tspan1 = textonline.querySelector('tspan');
            tspan2 = textonline2.querySelector('tspan');
            tspan1va = textonline_va.querySelector('tspan');
            tspan2va = textonline2_va.querySelector('tspan');

            if (document.getElementById('checkbox3sincrones').checked) {
                tspan1.textContent = 'Semipesencial';
                tspan2.textContent = 'Semipresencial';
                tspan1va.textContent = 'Semipresencial';
                tspan2va.textContent = 'Semipresencial';
            } else {
                tspan1.textContent = 'Presencial';
                tspan2.textContent = 'Presencial';
                tspan1va.textContent = 'Presencial';
                tspan2va.textContent = 'Presencial';
            }
        }

        function presencial(f) {
            text_presencial = document.getElementById('ubicacio2');
            tspan = text_presencial.querySelector('tspan');
            text_presencial_va = document.getElementById('ubicacio2v');
            tspan_va = text_presencial_va.querySelector('tspan');
            //Instagram
            text_presencial_instagram = document.getElementById('text_presencial_inst');
            text_presencial_instagram_va = document.getElementById('text_presencial_inst_va');

            tspan.textContent = f;
            tspan_va.textContent = f;
            text_presencial_instagram.textContent = f;
            text_presencial_instagram_va.textContent = f;
        }

        function cambiaLogo() {
            const logoElement = svgElement.getElementById('logo1');
            const logoElement_va = svgElement_va.getElementById('logo1v');
            //Instagram
            //const logoElement_instagram = svgElement_instagram.getElementById('logo1inst');
            //const logoElement_instagram_va = svgElement_instagram_va.getElementById('logo1inst_va');



            if (document.getElementById('checkbox1').checked) {
                logoElement.style.visibility = 'visible';
                logoElement_va.style.visibility = 'visible';
                logoElement.style.display = 'inline';
                logoElement_va.style.display = 'inline';

                //logoElement_instagram.style.visibility = 'visible';
                //logoElement_instagram_va.style.visibility = 'visible';


            } else {
                logoElement.style.visibility = 'hidden';
                logoElement_va.style.visibility = 'hidden';
                logoElement.style.display = 'none';
                logoElement_va.style.display = 'none';
                //logoElement_instagram.style.visibility = 'hidden';
                //logoElement_instagram_va.style.visibility = 'hidden';

            }


        }


        function cambiaLogo2() {
            const logoElement2 = svgElement.getElementById('logo2');
            const logoElement2_va = svgElement_va.getElementById('logo2v');
            //Instagram
            //const logoElement2_instagram = svgElement_instagram.getElementById('logo2inst');
            //const logoElement2_instagram_va = svgElement_instagram_va.getElementById('logo2inst_va');

            if (document.getElementById('checkbox2').checked) {
                logoElement2.style.visibility = 'visible';
                logoElement2_va.style.visibility = 'visible';
                logoElement2.style.display = 'inline';
                logoElement2_va.style.display = 'inline';
                //logoElement2_instagram.style.visibility = 'visible';
                //logoElement2_instagram_va.style.visibility = 'visible';
            } else {
                logoElement2.style.visibility = 'hidden';
                logoElement2_va.style.visibility = 'hidden';
                logoElement2.style.display = 'none';
                logoElement2_va.style.display = 'none';
                //logoElement2_instagram.style.visibility = 'hidden';
                //logoElement2_instagram_va.style.visibility = 'hidden';
            }


        }


        function cambiaLogo3() {
            const logoElement3 = svgElement.getElementById('logo3');
            const logoElement3_va = svgElement_va.getElementById('logo3v');
            //Instagram
            //const logoElement3_instagram = svgElement_instagram.getElementById('logo3inst');
            //const logoElement3_instagram_va = svgElement_instagram_va.getElementById('logo3inst_va');
            if (document.getElementById('checkbox3').checked) {
                logoElement3.style.visibility = 'visible';
                logoElement3_va.style.visibility = 'visible';
                logoElement3.style.display = 'inline';
                logoElement3_va.style.display = 'inline';
                //logoElement3_instagram.style.visibility = 'visible';
                //logoElement3_instagram_va.style.visibility = 'visible';
            } else {
                logoElement3.style.visibility = 'hidden';
                logoElement3_va.style.visibility = 'hidden';
                logoElement3.style.display = 'none';
                logoElement3_va.style.display = 'none';
                //logoElement3_instagram.style.visibility = 'hidden';
                //logoElement3_instagram_va.style.visibility = 'hidden';
            }

        }

        // Function to load the SVG file and modify the text
        function loadSVG(file) {
            fetch(file)
                .then(response => response.text())
                .then(data => {
                    // Create a DOM parser to parse the SVG content
                    const parser = new DOMParser();
                    const svgDocument = parser.parseFromString(data, 'image/svg+xml');
                    svgElement = svgDocument.documentElement;

                    const svgPreviewContainer = document.getElementById('svg-preview');
                    svgPreviewContainer.innerHTML = '';
                    svgPreviewContainer.appendChild(svgElement);

                })
                .catch(error => console.error('Error loading SVG:', error));
        }


        function loadSVG2(file) {
            fetch(file)
                .then(response => response.text())
                .then(data => {
                    // Create a DOM parser to parse the SVG content
                    const parser = new DOMParser();
                    const svgDocument = parser.parseFromString(data, 'image/svg+xml');
                    svgElement_va = svgDocument.documentElement;

                    const svgPreviewContainer = document.getElementById('svg-preview-va');
                    svgPreviewContainer.innerHTML = '';
                    svgPreviewContainer.appendChild(svgElement_va);

                })
                .catch(error => console.error('Error loading SVG:', error));
        }

        function loadSVG2inst1(file) {
            fetch(file)
                .then(response => response.text())
                .then(data => {
                    // Create a DOM parser to parse the SVG content
                    const parser = new DOMParser();
                    const svgDocument = parser.parseFromString(data, 'image/svg+xml');
                    svgElement_instagram = svgDocument.documentElement;

                    const svgPreviewContainer = document.getElementById('svg-preview-inst');
                    svgPreviewContainer.innerHTML = '';
                    svgPreviewContainer.appendChild(svgElement_instagram);


                })
                .catch(error => console.error('Error loading SVG:', error));
        }

        function loadSVG2inst2(file) {
            fetch(file)
                .then(response => response.text())
                .then(data => {
                    // Create a DOM parser to parse the SVG content
                    const parser = new DOMParser();
                    const svgDocument = parser.parseFromString(data, 'image/svg+xml');
                    svgElement_instagram_va = svgDocument.documentElement;

                    const svgPreviewContainer = document.getElementById('svg-preview-inst-va');
                    svgPreviewContainer.innerHTML = '';
                    svgPreviewContainer.appendChild(svgElement_instagram_va);


                })
                .catch(error => console.error('Error loading SVG:', error));
        }

        function descarrega_tot() {
            convertSVGtoSVG();
            convertSVGtoSVG_va();
        }

        function descarrega_tot_inst() {
            convertSVGtoSVG_inst();
            convertSVGtoSVG_va_inst();
        }


        function convertSVGtoSVG() {
            const svgElement2 = svgElement.cloneNode(true);

            svgElement2.setAttribute('width', 2040);
            svgElement2.setAttribute('height', 800);
            const svgData = new XMLSerializer().serializeToString(svgElement2);

            const svgBlob = new Blob([svgData], { type: 'image/svg+xml;charset=utf-8' });
            const url = URL.createObjectURL(svgBlob);

            const img = new Image();
            img.onload = function () {
                const canvas = document.getElementById('canvas');
                canvas.width = img.width;
                canvas.height = img.height;
                const ctx = canvas.getContext('2d');
                ctx.drawImage(img, 0, 0);

                URL.revokeObjectURL(url);

                canvas.toBlob(function (blob) {
                    const a = document.createElement('a');
                    a.href = URL.createObjectURL(blob);
                    a.download = 'baner_castella.png';
                    document.body.appendChild(a);
                    a.click();
                    document.body.removeChild(a);
                }, 'image/png');
            };
            img.src = url;

        }

        function convertSVGtoSVG_va() {
            const svgElement2_va = svgElement_va.cloneNode(true);

            svgElement2_va.setAttribute('width', 2040);
            svgElement2_va.setAttribute('height', 800);
            const svgData_va = new XMLSerializer().serializeToString(svgElement2_va);

            const svgBlob_va = new Blob([svgData_va], { type: 'image/svg+xml;charset=utf-8' });
            const url_va = URL.createObjectURL(svgBlob_va);

            const img_va = new Image();
            img_va.onload = function () {
                const canvas_va = document.getElementById('canvas_va');
                canvas_va.width = img_va.width;
                canvas_va.height = img_va.height;
                const ctx_va = canvas_va.getContext('2d');
                ctx_va.drawImage(img_va, 0, 0);

                URL.revokeObjectURL(url_va);

                canvas_va.toBlob(function (blob_va) {
                    const a_va = document.createElement('a');
                    a_va.href = URL.createObjectURL(blob_va);
                    a_va.download = 'baner_valencia.png';
                    document.body.appendChild(a_va);
                    a_va.click();
                    document.body.removeChild(a_va);
                }, 'image/png');
            };
            img_va.src = url_va;

        }


        //Instagram
        function convertSVGtoSVG_inst() {
            const svgElement2 = svgElement_instagram.cloneNode(true);

            svgElement2.setAttribute('width', 2040);
            svgElement2.setAttribute('height', 800);
            const svgData = new XMLSerializer().serializeToString(svgElement2);

            const svgBlob = new Blob([svgData], { type: 'image/svg+xml;charset=utf-8' });
            const url = URL.createObjectURL(svgBlob);

            const img = new Image();
            img.onload = function () {
                const canvas = document.getElementById('canvas');
                canvas.width = img.width;
                canvas.height = img.height;
                const ctx = canvas.getContext('2d');
                ctx.drawImage(img, 0, 0);

                URL.revokeObjectURL(url);

                canvas.toBlob(function (blob) {
                    const a = document.createElement('a');
                    a.href = URL.createObjectURL(blob);
                    a.download = 'baner_castella_instagram.png';
                    document.body.appendChild(a);
                    a.click();
                    document.body.removeChild(a);
                }, 'image/png');
            };
            img.src = url;

        }

        function convertSVGtoSVG_va_inst() {
            const svgElement2_va = svgElement_instagram_va.cloneNode(true);

            svgElement2_va.setAttribute('width', 2040);
            svgElement2_va.setAttribute('height', 800);
            const svgData_va = new XMLSerializer().serializeToString(svgElement2_va);

            const svgBlob_va = new Blob([svgData_va], { type: 'image/svg+xml;charset=utf-8' });
            const url_va = URL.createObjectURL(svgBlob_va);

            const img_va = new Image();
            img_va.onload = function () {
                const canvas_va = document.getElementById('canvas_va');
                canvas_va.width = img_va.width;
                canvas_va.height = img_va.height;
                const ctx_va = canvas_va.getContext('2d');
                ctx_va.drawImage(img_va, 0, 0);

                URL.revokeObjectURL(url_va);

                canvas_va.toBlob(function (blob_va) {
                    const a_va = document.createElement('a');
                    a_va.href = URL.createObjectURL(blob_va);
                    a_va.download = 'baner_valencia_instagram.png';
                    document.body.appendChild(a_va);
                    a_va.click();
                    document.body.removeChild(a_va);
                }, 'image/png');
            };
            img_va.src = url_va;

        }

        function traduce() {

            var storedData = localStorage.getItem('inputDataAPI');

            if (!storedData) {
                alert('No tienes API configurada');
                return;
            }

            var prompt = "Traduce el siguiente texto al valenciano donde detallo un título y una fecha. La respuesta solo debe incluir el texto traducido: 'titulo: " + document.getElementById('titulo').value + "; fechas: " + document.getElementById('fechas_text').value; + ";'";

            console.log(prompt);
            // Show spinner
            var spinner = $('<div class="spinner-border text-primary" role="status" style="position: fixed; top: 50%; left: 50%; z-index: 9999;"><span class="sr-only">Loading...</span></div>');
            $('body').append(spinner);
            $.ajax({
                url: "https://generativelanguage.googleapis.com/v1beta/models/gemini-1.5-flash:generateContent?key=" + storedData,
                type: "POST",
                contentType: "application/json",
                data: JSON.stringify({
                    contents: [{
                        parts: [{
                            text: prompt
                        }]
                    }]
                }),
                success: function (response) {
                    console.log(response);
                    var resposta = response.candidates[0].content.parts[0].text;
                    var parts = resposta.split(';');
                    var titulo = parts[0].replace('Títol: ', '').trim();
                    var fechas = parts[1].replace('Dates: ', '').trim();
                    document.getElementById('titulo_va').value = titulo;
                    document.getElementById('fechas_text_va').value = fechas;
                    fechas_va(fechas);
                    titular_va(titulo);
                },
                error: function (xhr, status, error) {
                    console.error("Error: " + error);
                    alert("Error: " + error);
                },
                complete: function () {
                    // Hide spinner
                    spinner.remove();
                }
            });

        }

        // document.addEventListener('DOMContentLoaded', function() {
        //     loadSVG('PROVA-plano.svg');
        //     loadSVG2('PROVA-plano-valencia.svg');
        // });

        $(document).ready(function () {

            loadSVG('BANER-castella.svg');
            loadSVG2('BANER-valencia.svg');
            loadSVG2inst1('BANER-castella-inst.svg');
            loadSVG2inst2('BANER-valencia-inst.svg');

        });

        // // Load the SVG file and modify the text
        // loadSVG('PROVA-plano.svg'); // Replace with the path to your SVG file
        // loadSVG2('PROVA-plano-valencia.svg');
    </script>
</body>

</html>